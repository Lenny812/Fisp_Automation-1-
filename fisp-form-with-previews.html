<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FISP Report Generator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; background: #f5f7fa; color: #1a202c; }
        .navbar { background: #1e3a5f; color: white; padding: 0 40px; height: 70px; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 20px; font-weight: 700; }
        .container { display: flex; max-width: 1400px; margin: 0 auto; min-height: calc(100vh - 70px); }
        .sidebar { width: 280px; background: white; padding: 30px 20px; border-right: 1px solid #e2e8f0; }
        .step { padding: 15px 20px; margin-bottom: 8px; border-radius: 8px; display: flex; align-items: center; gap: 12px; }
        .step.active { background: #fff5e6; border-left: 3px solid #f59e0b; font-weight: 600; }
        .step-number { width: 28px; height: 28px; border-radius: 50%; background: #e2e8f0; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; }
        .step.active .step-number { background: #f59e0b; color: white; }
        .main-content { flex: 1; padding: 40px; }
        .section-title { font-size: 28px; color: #1a202c; margin-bottom: 8px; font-weight: 700; }
        .section-description { color: #718096; font-size: 15px; margin-bottom: 30px; }
        .form-card { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .card-title { font-size: 18px; font-weight: 600; color: #2d3748; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #f7fafc; }
        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .form-group { display: flex; flex-direction: column; margin-bottom: 15px; }
        label { font-size: 14px; font-weight: 600; color: #4a5568; margin-bottom: 8px; }
        input, select, textarea { padding: 12px 16px; border: 1.5px solid #e2e8f0; border-radius: 8px; font-size: 15px; font-family: inherit; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #f59e0b; box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1); }
        .helper-text { font-size: 13px; color: #718096; margin-top: 6px; }
        .btn { padding: 14px 28px; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; border: none; }
        .btn-generate { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 20px 40px; font-size: 18px; width: 100%; margin-top: 20px; }
        .btn-generate:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4); }
        .btn-secondary { background: white; border: 1.5px solid #e2e8f0; color: #4a5568; width: 100%; margin-top: 10px; }
        .success-toast { position: fixed; top: 90px; right: 30px; background: #10b981; color: white; padding: 16px 24px; border-radius: 8px; display: none; z-index: 1000; }
        .success-toast.show { display: block; }
        .progress-bar { height: 4px; background: #e2e8f0; margin-bottom: 30px; border-radius: 2px; overflow: hidden; }
        .progress-fill { height: 100%; background: #f59e0b; width: 20%; }
        .upload-zone { border: 2px dashed #cbd5e0; border-radius: 12px; padding: 40px; text-align: center; cursor: pointer; background: #f7fafc; }
        .upload-zone:hover { border-color: #f59e0b; background: #fffbeb; }
        .photo-preview-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 15px; }
        .photo-preview { position: relative; border-radius: 8px; overflow: hidden; aspect-ratio: 1; background: #f7fafc; }
        .photo-preview img { width: 100%; height: 100%; object-fit: cover; }
        .photo-preview .remove-btn { position: absolute; top: 3px; right: 3px; background: rgba(239, 68, 68, 0.9); color: white; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; font-size: 12px; }
        .logo-preview { max-width: 200px; max-height: 100px; margin-top: 15px; border: 1px solid #e2e8f0; border-radius: 8px; padding: 10px; }
        .format-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px; }
        .format-option { border: 2px solid #e2e8f0; border-radius: 12px; padding: 25px; text-align: center; cursor: pointer; }
        .format-option:hover { border-color: #f59e0b; }
        .format-option.selected { border-color: #f59e0b; background: #fffbeb; }
        .format-option h3 { font-size: 18px; margin-bottom: 10px; }
        .format-option p { font-size: 13px; color: #718096; }
        .appurtenance-item { margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #f0f0f0; }
        .appurtenance-header { display: flex; align-items: center; gap: 15px; }
        .appurtenance-label { min-width: 180px; font-weight: 600; }
        .appurtenance-select { width: 150px; padding: 8px 12px; }
        .condition-details { display: none; margin-top: 15px; padding: 20px; border-radius: 10px; }
        .condition-details.show { display: block; }
        .condition-details.safe { background: #ecfdf5; border: 1px solid #10b981; }
        .condition-details.swarmp { background: #fffbeb; border: 1px solid #f59e0b; }
        .condition-details.unsafe { background: #fef2f2; border: 2px solid #ef4444; }
        .condition-details-title { font-weight: 600; margin-bottom: 15px; }
        .condition-details.safe .condition-details-title { color: #065f46; }
        .condition-details.swarmp .condition-details-title { color: #92400e; }
        .condition-details.unsafe .condition-details-title { color: #991b1b; }
        .photo-upload-section { margin-top: 15px; padding: 15px; background: #f8fafc; border-radius: 8px; }
        .photo-upload-section label { display: block; margin-bottom: 10px; }
        .photo-count { font-size: 12px; color: #718096; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">FISP Report Generator</div>
        <div style="color: #94a3b8; font-size: 14px;">Professional Building Inspection Reports</div>
    </div>
    <div class="container">
        <div class="sidebar">
            <div class="step active"><div class="step-number">1</div><div>Building Information</div></div>
            <div class="step"><div class="step-number">2</div><div>Inspector Details</div></div>
            <div class="step"><div class="step-number">3</div><div>Inspection Findings</div></div>
            <div class="step"><div class="step-number">4</div><div>Photo Upload</div></div>
            <div class="step"><div class="step-number">5</div><div>Generate Report</div></div>
        </div>
        <div class="main-content">
            <h1 class="section-title">FISP Report Generator</h1>
            <p class="section-description">Complete all sections below to generate your DOB-compliant FISP report</p>
            <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
            <form id="fispForm">
                <!-- PAGE 1: BUILDING INFO -->
                <div class="form-card">
                    <h2 class="card-title">Basic Building Details</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>Street Address *</label><input type="text" id="address" placeholder="e.g., 350 Fifth Avenue" required></div>
                        <div class="form-group"><label>Borough *</label><select id="borough" required><option value="">Select...</option><option>Manhattan</option><option>Brooklyn</option><option>Queens</option><option>Bronx</option><option>Staten Island</option></select></div>
                        <div class="form-group"><label>Block Number *</label><input type="text" id="block" placeholder="e.g., 826" required><span class="helper-text">Found on property tax bill or ACRIS</span></div>
                        <div class="form-group"><label>Lot Number</label><input type="text" id="lot" placeholder="e.g., 1"></div>
                        <div class="form-group"><label>BIN</label><input type="text" id="bin" placeholder="e.g., 1008315 (7 digits)"></div>
                        <div class="form-group"><label>Zip Code</label><input type="text" id="zip" placeholder="e.g., 10118"></div>
                    </div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Building Owner Information</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>Owner Name *</label><input type="text" id="ownerName" placeholder="e.g., John Smith or ABC Realty LLC" required></div>
                        <div class="form-group"><label>Email</label><input type="email" id="ownerEmail" placeholder="e.g., owner@building.com"></div>
                        <div class="form-group"><label>Phone</label><input type="tel" id="ownerPhone" placeholder="e.g., (212) 555-1234"></div>
                        <div class="form-group"><label>Company</label><input type="text" id="ownerCompany" placeholder="e.g., ABC Property Management Co."></div>
                    </div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Building Description</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>Stories *</label><input type="number" id="stories" placeholder="e.g., 6" required></div>
                        <div class="form-group"><label>Height (ft)</label><input type="text" id="buildingHeight" placeholder="e.g., 65"></div>
                        <div class="form-group"><label>Wall Type</label><select id="wallType"><option value="">Select...</option><option>Masonry Bearing Wall</option><option>Concrete</option><option>Steel Frame</option><option>Wood Frame</option><option>Curtain Wall</option></select></div>
                        <div class="form-group"><label>Wall Material</label><input type="text" id="wallMaterial" placeholder="e.g., Red brick with limestone trim"></div>
                        <div class="form-group"><label>Year Built</label><input type="text" id="yearBuilt" placeholder="e.g., 1925"></div>
                        <div class="form-group"><label>Building Use</label><select id="buildingUse"><option value="">Select...</option><option>Residential</option><option>Commercial</option><option>Mixed Use</option><option>Industrial</option></select></div>
                    </div>
                </div>
                <!-- PAGE 2: INSPECTOR -->
                <div class="form-card">
                    <h2 class="card-title">QEWI Information</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>First Name *</label><input type="text" id="qewiFirstName" placeholder="e.g., John" required></div>
                        <div class="form-group"><label>Last Name *</label><input type="text" id="qewiLastName" placeholder="e.g., Smith" required></div>
                        <div class="form-group"><label>License Type *</label><select id="qewiLicense" required><option value="">Select...</option><option value="PE">Professional Engineer (PE)</option><option value="RA">Registered Architect (RA)</option></select></div>
                        <div class="form-group"><label>License # *</label><input type="text" id="qewiLicenseNumber" placeholder="e.g., 087654" required></div>
                        <div class="form-group"><label>Firm Name</label><input type="text" id="qewiFirmName" placeholder="e.g., Smith Engineering Associates, PC"></div>
                        <div class="form-group"><label>Firm Address</label><input type="text" id="qewiFirmAddress" placeholder="e.g., 123 Main Street, Suite 400, New York, NY 10001"></div>
                        <div class="form-group"><label>Phone</label><input type="tel" id="qewiPhone" placeholder="e.g., (212) 555-1234"></div>
                        <div class="form-group"><label>Email</label><input type="email" id="qewiEmail" placeholder="e.g., jsmith@smithengineering.com"></div>
                    </div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Inspection Team</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>Inspector 1 Name</label><input type="text" id="inspector1Name" placeholder="e.g., Jane Doe"></div>
                        <div class="form-group"><label>Relationship</label><input type="text" id="inspector1Role" placeholder="e.g., Employee, Subcontractor"></div>
                        <div class="form-group"><label>Inspector 2 Name</label><input type="text" id="inspector2Name" placeholder="e.g., Bob Johnson"></div>
                        <div class="form-group"><label>Relationship</label><input type="text" id="inspector2Role" placeholder="e.g., Employee, Subcontractor"></div>
                    </div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Rigger Information</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>Rigger Name</label><input type="text" id="riggerName" placeholder="e.g., Mike Wilson"></div>
                        <div class="form-group"><label>License #</label><input type="text" id="riggerLicense" placeholder="e.g., 6098"></div>
                        <div class="form-group"><label>Company</label><input type="text" id="riggerCompany" placeholder="e.g., Metro Rigging & Scaffold Corp."></div>
                        <div class="form-group"><label>Phone</label><input type="tel" id="riggerPhone" placeholder="e.g., (718) 555-4567"></div>
                    </div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Inspection Details</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>Start Date *</label><input type="date" id="inspectionStartDate" required></div>
                        <div class="form-group"><label>End Date *</label><input type="date" id="inspectionEndDate" required></div>
                        <div class="form-group"><label>Access Method *</label><select id="accessMethod" required><option value="">Select...</option><option>Suspended Scaffold</option><option>Boom Lift</option><option>Rope Access</option><option>Fire Escapes</option><option>Balconies</option><option>Multiple Methods</option></select></div>
                        <div class="form-group"><label>FISP Cycle *</label><select id="cycleNumber" required><option value="">Select...</option><option>9A</option><option>9B</option><option>9C</option><option>10A</option><option>10B</option><option>10C</option></select></div>
                        <div class="form-group"><label>Filing Type *</label><select id="filingType" required><option value="">Select...</option><option>Initial</option><option>Amended</option><option>Subsequent</option></select></div>
                        <div class="form-group"><label>DOB Control #</label><input type="text" id="dobControlNumber" placeholder="e.g., 123456789 (assigned after filing)"></div>
                    </div>
                </div>
                <!-- PAGE 3: FINDINGS -->
                <div class="form-card">
                    <h2 class="card-title">Overall Classification</h2>
                    <div class="form-grid">
                        <div class="form-group"><label>Current Status *</label><select id="buildingStatus" required style="font-size:16px;padding:15px"><option value="">Select...</option><option value="SAFE">SAFE</option><option value="SWARMP">SWARMP</option><option value="UNSAFE">UNSAFE</option></select></div>
                        <div class="form-group"><label>Previous Status</label><select id="previousStatus"><option value="">Select...</option><option>SAFE</option><option>SWARMP</option><option>UNSAFE</option><option>No previous</option></select></div>
                    </div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Executive Summary</h2>
                    <div class="form-group"><label>Building Description *</label><textarea id="generalDescription" rows="3" placeholder="Example: The subject building is a 6-story, 65-foot tall residential building with masonry bearing walls clad in red brick with limestone trim at the base and window surrounds. The building was constructed circa 1925 and contains 24 dwelling units." required></textarea></div>
                    <div class="form-group"><label>Scope of Inspection *</label><textarea id="scopeOfInspection" rows="3" placeholder="Example: A close-up visual examination of all exterior walls was conducted from a suspended scaffold on all four elevations. Ground-level observations were made from the public sidewalk. The inspection included all appurtenances attached to or projecting from the exterior walls." required></textarea></div>
                    <div class="form-group"><label>Summary of Findings *</label><textarea id="summaryOfFindings" rows="3" placeholder="Example: The building exterior walls and appurtenances were found to be in SAFE condition. Minor weathering of mortar joints was observed but no conditions requiring repair were identified. The facade appears to be well maintained." required></textarea></div>
                </div>
                <!-- ALL APPURTENANCES FROM DOB -->
                <div class="form-card">
                    <h2 class="card-title">Appurtenances Status</h2>
                    <p style="color:#718096;font-size:14px;margin-bottom:20px">Select status for each appurtenance. Safe/SWARMP/Unsafe will prompt for condition details and up to 10 photos.</p>
                    <div id="appurtenancesContainer"></div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Water Tightness</h2>
                    <div class="form-group"><label>Water-tightness *</label><select id="waterTightness" required><option value="">Select...</option><option value="watertight">Watertight - No infiltration</option><option value="compromised">Compromised</option></select></div>
                </div>
                <!-- PAGE 4: PHOTOS -->
                <div class="form-card">
                    <h2 class="card-title">Company Logo</h2>
                    <div class="upload-zone" id="logoZone" onclick="document.getElementById('logoInput').click()">
                        <div style="font-size:24px;color:#718096;margin-bottom:10px">[Logo]</div>
                        <div>Click to upload logo</div>
                        <div style="color:#a0aec0;font-size:13px">PNG, JPG - 300x100px recommended</div>
                    </div>
                    <input type="file" id="logoInput" accept="image/*" style="display:none" onchange="handleLogoUpload(event)">
                    <div id="logoPreviewContainer" style="display:none;margin-top:15px">
                        <img id="logoPreview" class="logo-preview">
                        <button type="button" onclick="removeLogo()" style="margin-left:10px;background:#ef4444;color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer">Remove</button>
                    </div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Elevation Photos</h2>
                    <div class="upload-zone" onclick="document.getElementById('elevationInput').click()">
                        <div style="font-size:24px;color:#718096;margin-bottom:10px">[Photos]</div>
                        <div>Click to upload elevation photos</div>
                        <div style="color:#a0aec0;font-size:13px">N, S, E, W elevations - Multiple allowed</div>
                    </div>
                    <input type="file" id="elevationInput" accept="image/*" multiple style="display:none" onchange="handlePhotoUpload(event,'elevation')">
                    <div id="elevationPreviewGrid" class="photo-preview-grid"></div>
                </div>
                <div class="form-card">
                    <h2 class="card-title">Inspector Photos</h2>
                    <div class="upload-zone" onclick="document.getElementById('inspectorInput').click()">
                        <div style="font-size:24px;color:#718096;margin-bottom:10px">[Photos]</div>
                        <div>Click to upload inspector photos</div>
                        <div style="color:#a0aec0;font-size:13px">Photos of QEWI/team conducting inspection</div>
                    </div>
                    <input type="file" id="inspectorInput" accept="image/*" multiple style="display:none" onchange="handlePhotoUpload(event,'inspector')">
                    <div id="inspectorPreviewGrid" class="photo-preview-grid"></div>
                </div>
                <!-- PAGE 5: GENERATE -->
                <div class="form-card">
                    <h2 class="card-title">Report Format</h2>
                    <div class="format-grid">
                        <div class="format-option selected" onclick="selectFormat('classic',this)">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNDAiIGhlaWdodD0iMzIwIiB2aWV3Qm94PSIwIDAgMjQwIDMyMCI+CiAgPHJlY3Qgd2lkdGg9IjI0MCIgaGVpZ2h0PSIzMjAiIGZpbGw9IndoaXRlIi8+CiAgPHJlY3QgeD0iMTAiIHk9IjEwIiB3aWR0aD0iMjIwIiBoZWlnaHQ9IjMwMCIgZmlsbD0id2hpdGUiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgCiAgPCEtLSBIZWFkZXIgLS0+CiAgPHRleHQgeD0iMTIwIiB5PSIzNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIj5GQUNBREUgSU5TUEVDVElPTjwvdGV4dD4KICA8dGV4dCB4PSIxMjAiIHk9IjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iVGltZXMgTmV3IFJvbWFuLCBzZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiPlNBRkVUWSBQUk9HUkFNIFJFUE9SVDwvdGV4dD4KICA8bGluZSB4MT0iMjAiIHkxPSI1OCIgeDI9IjIyMCIgeTI9IjU4IiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMiIvPgogIAogIDwhLS0gQnVpbGRpbmcgSW5mbyBTZWN0aW9uIC0tPgogIDx0ZXh0IHg9IjIwIiB5PSI3OCIgZm9udC1mYW1pbHk9IlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtd2VpZ2h0PSJib2xkIj5CVUlMRElORyBJTkZPUk1BVElPTjwvdGV4dD4KICA8bGluZSB4MT0iMjAiIHkxPSI4MiIgeDI9IjIyMCIgeTI9IjgyIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMSIvPgogIAogIDwhLS0gVGFibGUgLS0+CiAgPHJlY3QgeD0iMjAiIHk9Ijg4IiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE4IiBmaWxsPSIjZjBmMGYwIiBzdHJva2U9IiMzMzMiLz4KICA8dGV4dCB4PSIyNSIgeT0iMTAwIiBmb250LWZhbWlseT0iVGltZXMgTmV3IFJvbWFuLCBzZXJpZiIgZm9udC1zaXplPSI5IiBmb250LXdlaWdodD0iYm9sZCI+QWRkcmVzczo8L3RleHQ+CiAgPHRleHQgeD0iOTAiIHk9IjEwMCIgZm9udC1mYW1pbHk9IlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiIGZvbnQtc2l6ZT0iOSI+MzUwIEZpZnRoIEF2ZW51ZTwvdGV4dD4KICAKICA8cmVjdCB4PSIyMCIgeT0iMTA2IiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE4IiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjMzMzIi8+CiAgPHRleHQgeD0iMjUiIHk9IjExOCIgZm9udC1mYW1pbHk9IlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiIGZvbnQtc2l6ZT0iOSIgZm9udC13ZWlnaHQ9ImJvbGQiPkJsb2NrL0xvdDo8L3RleHQ+CiAgPHRleHQgeD0iOTAiIHk9IjExOCIgZm9udC1mYW1pbHk9IlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiIGZvbnQtc2l6ZT0iOSI+ODI2IC8gMTwvdGV4dD4KICAKICA8cmVjdCB4PSIyMCIgeT0iMTI0IiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE4IiBmaWxsPSIjZjBmMGYwIiBzdHJva2U9IiMzMzMiLz4KICA8dGV4dCB4PSIyNSIgeT0iMTM2IiBmb250LWZhbWlseT0iVGltZXMgTmV3IFJvbWFuLCBzZXJpZiIgZm9udC1zaXplPSI5IiBmb250LXdlaWdodD0iYm9sZCI+QklOOjwvdGV4dD4KICA8dGV4dCB4PSI5MCIgeT0iMTM2IiBmb250LWZhbWlseT0iVGltZXMgTmV3IFJvbWFuLCBzZXJpZiIgZm9udC1zaXplPSI5Ij4xMDA4MzE1PC90ZXh0PgogIAogIDwhLS0gU3RhdHVzIEJveCAtLT4KICA8cmVjdCB4PSIyMCIgeT0iMTUyIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjMzMzIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSIxMjAiIHk9IjE3MiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIj5DTEFTU0lGSUNBVElPTjogU0FGRTwvdGV4dD4KICAKICA8IS0tIFFFV0kgU2VjdGlvbiAtLT4KICA8dGV4dCB4PSIyMCIgeT0iMjAwIiBmb250LWZhbWlseT0iVGltZXMgTmV3IFJvbWFuLCBzZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiPlFVQUxJRklFRCBJTlNQRUNUT1IgKFFFV0kpPC90ZXh0PgogIDxsaW5lIHgxPSIyMCIgeTE9IjIwNCIgeDI9IjIyMCIgeTI9IjIwNCIgc3Ryb2tlPSIjMzMzIiBzdHJva2Utd2lkdGg9IjEiLz4KICA8dGV4dCB4PSIyNSIgeT0iMjE4IiBmb250LWZhbWlseT0iVGltZXMgTmV3IFJvbWFuLCBzZXJpZiIgZm9udC1zaXplPSI5Ij5Kb2huIFNtaXRoLCBQRSAjMDg3NjU0PC90ZXh0PgogIAogIDwhLS0gUGhvdG9zIFNlY3Rpb24gLS0+CiAgPHRleHQgeD0iMjAiIHk9IjI0MCIgZm9udC1mYW1pbHk9IlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtd2VpZ2h0PSJib2xkIj5QSE9UT0dSQVBIUzwvdGV4dD4KICA8bGluZSB4MT0iMjAiIHkxPSIyNDQiIHgyPSIyMjAiIHkyPSIyNDQiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHJlY3QgeD0iMjUiIHk9IjI1MCIgd2lkdGg9IjU1IiBoZWlnaHQ9IjQwIiBmaWxsPSIjZjVmNWY1IiBzdHJva2U9IiMzMzMiLz4KICA8dGV4dCB4PSI1MiIgeT0iMjczIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzk5OSI+W1Bob3RvXTwvdGV4dD4KICA8cmVjdCB4PSI5MCIgeT0iMjUwIiB3aWR0aD0iNTUiIGhlaWdodD0iNDAiIGZpbGw9IiNmNWY1ZjUiIHN0cm9rZT0iIzMzMyIvPgogIDx0ZXh0IHg9IjExNyIgeT0iMjczIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzk5OSI+W1Bob3RvXTwvdGV4dD4KICA8cmVjdCB4PSIxNTUiIHk9IjI1MCIgd2lkdGg9IjU1IiBoZWlnaHQ9IjQwIiBmaWxsPSIjZjVmNWY1IiBzdHJva2U9IiMzMzMiLz4KICA8dGV4dCB4PSIxODIiIHk9IjI3MyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjgiIGZpbGw9IiM5OTkiPltQaG90b108L3RleHQ+CiAgCiAgPCEtLSBGb290ZXIgLS0+CiAgPGxpbmUgeDE9IjIwIiB5MT0iMjk1IiB4Mj0iMjIwIiB5Mj0iMjk1IiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjEyMCIgeT0iMzA3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iVGltZXMgTmV3IFJvbWFuLCBzZXJpZiIgZm9udC1zaXplPSI5IiBmb250LXdlaWdodD0iYm9sZCI+Q0xBU1NJQyBGT1JNQVQgLSBUcmFkaXRpb25hbCBET0IgU3R5bGU8L3RleHQ+Cjwvc3ZnPgo=" style="width:100%;border-radius:8px;margin-bottom:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                            <h3>Classic</h3>
                            <p>Traditional DOB format - Professional and clean</p>
                        </div>
                        <div class="format-option" onclick="selectFormat('modern',this)">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNDAiIGhlaWdodD0iMzIwIiB2aWV3Qm94PSIwIDAgMjQwIDMyMCI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImhlYWRlckdyYWQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMWUzYTVmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzJkNWE4NyIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgCiAgPHJlY3Qgd2lkdGg9IjI0MCIgaGVpZ2h0PSIzMjAiIGZpbGw9IndoaXRlIi8+CiAgCiAgPCEtLSBIZWFkZXIgLS0+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSI2MCIgZmlsbD0idXJsKCNoZWFkZXJHcmFkKSIvPgogIDx0ZXh0IHg9IjEyMCIgeT0iMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIj5GSVNQIElOU1BFQ1RJT04gUkVQT1JUPC90ZXh0PgogIDx0ZXh0IHg9IjEyMCIgeT0iNDgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSI5IiBmaWxsPSIjOTRhM2I4Ij5DeWNsZSAxMEEg4oCiIEluaXRpYWwgRmlsaW5nPC90ZXh0PgogIAogIDwhLS0gU3RhdHVzIEJhZGdlIC0tPgogIDxyZWN0IHg9Ijc1IiB5PSI3MCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjI4IiByeD0iMTQiIGZpbGw9IiMxMGI5ODEiLz4KICA8dGV4dCB4PSIxMjAiIHk9Ijg5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSI+4pyTIFNBRkU8L3RleHQ+CiAgCiAgPCEtLSBJbmZvIENhcmRzIC0tPgogIDxyZWN0IHg9IjE1IiB5PSIxMTAiIHdpZHRoPSIxMDAiIGhlaWdodD0iNDAiIHJ4PSI2IiBmaWxsPSIjZjhmYWZjIi8+CiAgPHJlY3QgeD0iMTUiIHk9IjExMCIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIGZpbGw9IiNmNTllMGIiLz4KICA8dGV4dCB4PSIyNSIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzY0NzQ4YiI+QUREUkVTUzwvdGV4dD4KICA8dGV4dCB4PSIyNSIgeT0iMTQwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyOTNiIj4zNTAgRmlmdGggQXZlPC90ZXh0PgogIAogIDxyZWN0IHg9IjEyNSIgeT0iMTEwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjQwIiByeD0iNiIgZmlsbD0iI2Y4ZmFmYyIvPgogIDxyZWN0IHg9IjEyNSIgeT0iMTEwIiB3aWR0aD0iMyIgaGVpZ2h0PSI0MCIgZmlsbD0iI2Y1OWUwYiIvPgogIDx0ZXh0IHg9IjEzNSIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzY0NzQ4YiI+Qk9ST1VHSDwvdGV4dD4KICA8dGV4dCB4PSIxMzUiIHk9IjE0MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlMjkzYiI+TWFuaGF0dGFuPC90ZXh0PgogIAogIDxyZWN0IHg9IjE1IiB5PSIxNjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iNDAiIHJ4PSI2IiBmaWxsPSIjZjhmYWZjIi8+CiAgPHJlY3QgeD0iMTUiIHk9IjE2MCIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIGZpbGw9IiNmNTllMGIiLz4KICA8dGV4dCB4PSIyNSIgeT0iMTc1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzY0NzQ4YiI+QkxPQ0sgLyBMT1Q8L3RleHQ+CiAgPHRleHQgeD0iMjUiIHk9IjE5MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlMjkzYiI+ODI2IC8gMTwvdGV4dD4KICAKICA8cmVjdCB4PSIxMjUiIHk9IjE2MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI0MCIgcng9IjYiIGZpbGw9IiNmOGZhZmMiLz4KICA8cmVjdCB4PSIxMjUiIHk9IjE2MCIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIGZpbGw9IiNmNTllMGIiLz4KICA8dGV4dCB4PSIxMzUiIHk9IjE3NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjgiIGZpbGw9IiM2NDc0OGIiPkJJTjwvdGV4dD4KICA8dGV4dCB4PSIxMzUiIHk9IjE5MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlMjkzYiI+MTAwODMxNTwvdGV4dD4KICAKICA8IS0tIFBob3RvcyBTZWN0aW9uIC0tPgogIDx0ZXh0IHg9IjE1IiB5PSIyMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMxZTNhNWYiPlBIT1RPR1JBUEhTPC90ZXh0PgogIDxsaW5lIHgxPSIxNSIgeTE9IjIzMCIgeDI9Ijg1IiB5Mj0iMjMwIiBzdHJva2U9IiNmNTllMGIiIHN0cm9rZS13aWR0aD0iMiIvPgogIAogIDxyZWN0IHg9IjE1IiB5PSIyNDAiIHdpZHRoPSI1MCIgaGVpZ2h0PSIzOCIgcng9IjQiIGZpbGw9IiNmMWY1ZjkiLz4KICA8dGV4dCB4PSI0MCIgeT0iMjYzIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzk0YTNiOCI+Tm9ydGg8L3RleHQ+CiAgPHJlY3QgeD0iNzAiIHk9IjI0MCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjM4IiByeD0iNCIgZmlsbD0iI2YxZjVmOSIvPgogIDx0ZXh0IHg9Ijk1IiB5PSIyNjMiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI4IiBmaWxsPSIjOTRhM2I4Ij5Tb3V0aDwvdGV4dD4KICA8cmVjdCB4PSIxMjUiIHk9IjI0MCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjM4IiByeD0iNCIgZmlsbD0iI2YxZjVmOSIvPgogIDx0ZXh0IHg9IjE1MCIgeT0iMjYzIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzk0YTNiOCI+RWFzdDwvdGV4dD4KICA8cmVjdCB4PSIxODAiIHk9IjI0MCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjM4IiByeD0iNCIgZmlsbD0iI2YxZjVmOSIvPgogIDx0ZXh0IHg9IjIwNSIgeT0iMjYzIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iIzk0YTNiOCI+V2VzdDwvdGV4dD4KICAKICA8IS0tIEZvb3RlciAtLT4KICA8cmVjdCB4PSIwIiB5PSIyOTAiIHdpZHRoPSIyNDAiIGhlaWdodD0iMzAiIGZpbGw9IiNmOGZhZmMiLz4KICA8dGV4dCB4PSIxMjAiIHk9IjMwOCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjkiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUzYTVmIj5NT0RFUk4gRk9STUFUIC0gQ29udGVtcG9yYXJ5IERlc2lnbjwvdGV4dD4KPC9zdmc+Cg==" style="width:100%;border-radius:8px;margin-bottom:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                            <h3>Modern</h3>
                            <p>Contemporary design - Sleek and minimal</p>
                        </div>
                        <div class="format-option" onclick="selectFormat('detailed',this)">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNDAiIGhlaWdodD0iMzIwIiB2aWV3Qm94PSIwIDAgMjQwIDMyMCI+CiAgPHJlY3Qgd2lkdGg9IjI0MCIgaGVpZ2h0PSIzMjAiIGZpbGw9IiNmZmZlZjgiLz4KICAKICA8IS0tIEhlYWRlciB3aXRoIGRvdWJsZSBib3JkZXIgLS0+CiAgPHJlY3QgeD0iMTAiIHk9IjEwIiB3aWR0aD0iMjIwIiBoZWlnaHQ9IjU1IiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjMWUzYTVmIiBzdHJva2Utd2lkdGg9IjMiLz4KICA8cmVjdCB4PSIxMyIgeT0iMTMiIHdpZHRoPSIyMTQiIGhlaWdodD0iNDkiIGZpbGw9IndoaXRlIiBzdHJva2U9IiMxZTNhNWYiIHN0cm9rZS13aWR0aD0iMSIvPgogIDx0ZXh0IHg9IjEyMCIgeT0iMzIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMxZTNhNWYiPkNPTVBSRUhFTlNJVkUgRklTUCBSRVBPUlQ8L3RleHQ+CiAgPHRleHQgeD0iMTIwIiB5PSI0NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjgiIGZpbGw9IiM2NjYiPkZhY2FkZSBJbnNwZWN0aW9uIFNhZmV0eSBQcm9ncmFtPC90ZXh0PgogIDxyZWN0IHg9Ijg1IiB5PSI1MCIgd2lkdGg9IjcwIiBoZWlnaHQ9IjEyIiByeD0iMiIgZmlsbD0iIzFlM2E1ZiIvPgogIDx0ZXh0IHg9IjEyMCIgeT0iNTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI3IiBmaWxsPSJ3aGl0ZSI+Q1lDTEUgMTBBIOKAoiBJTklUSUFMPC90ZXh0PgogIAogIDwhLS0gQnVpbGRpbmcgSW5mbyBTZWN0aW9uIC0tPgogIDxyZWN0IHg9IjEwIiB5PSI3NSIgd2lkdGg9IjIyMCIgaGVpZ2h0PSIxNiIgZmlsbD0iIzFlM2E1ZiIvPgogIDx0ZXh0IHg9IjE4IiB5PSI4NiIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjkiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSI+wqcgQlVJTERJTkcgSU5GT1JNQVRJT048L3RleHQ+CiAgPHJlY3QgeD0iMTAiIHk9IjkxIiB3aWR0aD0iMjIwIiBoZWlnaHQ9IjU1IiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjMWUzYTVmIi8+CiAgCiAgPHRleHQgeD0iMTgiIHk9IjEwNSIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjgiIGZpbGw9IiM2NjYiPkFkZHJlc3M6PC90ZXh0PgogIDx0ZXh0IHg9IjE4MCIgeT0iMTA1IiB0ZXh0LWFuY2hvcj0iZW5kIiBmb250LWZhbWlseT0iR2VvcmdpYSwgc2VyaWYiIGZvbnQtc2l6ZT0iOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMxZTNhNWYiPjM1MCBGaWZ0aCBBdmVudWU8L3RleHQ+CiAgPGxpbmUgeDE9IjE4IiB5MT0iMTA4IiB4Mj0iMjIyIiB5Mj0iMTA4IiBzdHJva2U9IiNjY2MiIHN0cm9rZS1kYXNoYXJyYXk9IjIsMiIvPgogIAogIDx0ZXh0IHg9IjE4IiB5PSIxMjAiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSI4IiBmaWxsPSIjNjY2Ij5CbG9jayAvIExvdCAvIEJJTjo8L3RleHQ+CiAgPHRleHQgeD0iMTgwIiB5PSIxMjAiIHRleHQtYW5jaG9yPSJlbmQiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSI4IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlM2E1ZiI+ODI2IC8gMSAvIDEwMDgzMTU8L3RleHQ+CiAgPGxpbmUgeDE9IjE4IiB5MT0iMTIzIiB4Mj0iMjIyIiB5Mj0iMTIzIiBzdHJva2U9IiNjY2MiIHN0cm9rZS1kYXNoYXJyYXk9IjIsMiIvPgogIAogIDx0ZXh0IHg9IjE4IiB5PSIxMzUiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSI4IiBmaWxsPSIjNjY2Ij5TdG9yaWVzIC8gSGVpZ2h0OjwvdGV4dD4KICA8dGV4dCB4PSIxODAiIHk9IjEzNSIgdGV4dC1hbmNob3I9ImVuZCIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjgiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUzYTVmIj42IC8gNjUgZnQ8L3RleHQ+CiAgCiAgPCEtLSBTdGF0dXMgQm94IC0tPgogIDxyZWN0IHg9IjEwIiB5PSIxNTUiIHdpZHRoPSIyMjAiIGhlaWdodD0iMzUiIGZpbGw9IiNlY2ZkZjUiIHN0cm9rZT0iIzEwYjk4MSIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPHRleHQgeD0iMTIwIiB5PSIxNjgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSI3IiBmaWxsPSIjNjY2Ij5PVkVSQUxMIENMQVNTSUZJQ0FUSU9OPC90ZXh0PgogIDx0ZXh0IHg9IjEyMCIgeT0iMTgzIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iR2VvcmdpYSwgc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMDY1ZjQ2Ij7inJMgU0FGRTwvdGV4dD4KICAKICA8IS0tIENvbmRpdGlvbnMgU2VjdGlvbiAtLT4KICA8cmVjdCB4PSIxMCIgeT0iMjAwIiB3aWR0aD0iMjIwIiBoZWlnaHQ9IjE2IiBmaWxsPSIjMWUzYTVmIi8+CiAgPHRleHQgeD0iMTgiIHk9IjIxMSIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjkiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSI+wqcgQ09ORElUSU9OUyBTVU1NQVJZPC90ZXh0PgogIDxyZWN0IHg9IjEwIiB5PSIyMTYiIHdpZHRoPSIyMjAiIGhlaWdodD0iNTUiIGZpbGw9IndoaXRlIiBzdHJva2U9IiMxZTNhNWYiLz4KICAKICA8IS0tIE1pbmkgVGFibGUgLS0+CiAgPHJlY3QgeD0iMTUiIHk9IjIyMSIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxNCIgZmlsbD0iI2YwZjBmMCIgc3Ryb2tlPSIjY2NjIi8+CiAgPHRleHQgeD0iMjAiIHk9IjIzMSIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjciIGZvbnQtd2VpZ2h0PSJib2xkIj5BcHB1cnRlbmFuY2U8L3RleHQ+CiAgPHJlY3QgeD0iMTE1IiB5PSIyMjEiIHdpZHRoPSIxMTAiIGhlaWdodD0iMTQiIGZpbGw9IiNmMGYwZjAiIHN0cm9rZT0iI2NjYyIvPgogIDx0ZXh0IHg9IjEyMCIgeT0iMjMxIiBmb250LWZhbWlseT0iR2VvcmdpYSwgc2VyaWYiIGZvbnQtc2l6ZT0iNyIgZm9udC13ZWlnaHQ9ImJvbGQiPlN0YXR1czwvdGV4dD4KICAKICA8cmVjdCB4PSIxNSIgeT0iMjM1IiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEyIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjY2NjIi8+CiAgPHRleHQgeD0iMjAiIHk9IjI0NCIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjciPkZpcmUgRXNjYXBlczwvdGV4dD4KICA8cmVjdCB4PSIxMTUiIHk9IjIzNSIgd2lkdGg9IjExMCIgaGVpZ2h0PSIxMiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI2NjYyIvPgogIDx0ZXh0IHg9IjEyMCIgeT0iMjQ0IiBmb250LWZhbWlseT0iR2VvcmdpYSwgc2VyaWYiIGZvbnQtc2l6ZT0iNyIgZmlsbD0iIzA2NWY0NiI+U2FmZTwvdGV4dD4KICAKICA8cmVjdCB4PSIxNSIgeT0iMjQ3IiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEyIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjY2NjIi8+CiAgPHRleHQgeD0iMjAiIHk9IjI1NiIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjciPlBhcmFwZXRzL0NvcGluZ3M8L3RleHQ+CiAgPHJlY3QgeD0iMTE1IiB5PSIyNDciIHdpZHRoPSIxMTAiIGhlaWdodD0iMTIiIGZpbGw9IndoaXRlIiBzdHJva2U9IiNjY2MiLz4KICA8dGV4dCB4PSIxMjAiIHk9IjI1NiIgZm9udC1mYW1pbHk9Ikdlb3JnaWEsIHNlcmlmIiBmb250LXNpemU9IjciIGZpbGw9IiMwNjVmNDYiPlNhZmU8L3RleHQ+CiAgCiAgPHJlY3QgeD0iMTUiIHk9IjI1OSIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI2NjYyIvPgogIDx0ZXh0IHg9IjIwIiB5PSIyNjgiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSI3Ij5XaW5kb3cgRnJhbWVzPC90ZXh0PgogIDxyZWN0IHg9IjExNSIgeT0iMjU5IiB3aWR0aD0iMTEwIiBoZWlnaHQ9IjEyIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjY2NjIi8+CiAgPHRleHQgeD0iMTIwIiB5PSIyNjgiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSI3IiBmaWxsPSIjMDY1ZjQ2Ij5TYWZlPC90ZXh0PgogIAogIDwhLS0gRm9vdGVyIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjI4NSIgeDI9IjIzMCIgeTI9IjI4NSIgc3Ryb2tlPSIjMWUzYTVmIiBzdHJva2Utd2lkdGg9IjMiLz4KICA8bGluZSB4MT0iMTAiIHkxPSIyODgiIHgyPSIyMzAiIHkyPSIyODgiIHN0cm9rZT0iIzFlM2E1ZiIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iMTIwIiB5PSIzMDUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBzZXJpZiIgZm9udC1zaXplPSI5IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlM2E1ZiI+REVUQUlMRUQgRk9STUFUIC0gQ29tcHJlaGVuc2l2ZSBEb2NzPC90ZXh0Pgo8L3N2Zz4K" style="width:100%;border-radius:8px;margin-bottom:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                            <h3>Detailed</h3>
                            <p>Comprehensive format - Thorough documentation</p>
                        </div>
                    </div>

                    <input type="hidden" id="selectedFormat" value="classic">
                </div>
                <div class="form-card">
                    <h2 class="card-title">Summary</h2>
                    <div style="background:#f7fafc;border-radius:8px;padding:20px;display:grid;grid-template-columns:1fr 1fr;gap:10px">
                        <div><strong>Building:</strong> <span id="summaryAddress">-</span></div>
                        <div><strong>Borough:</strong> <span id="summaryBorough">-</span></div>
                        <div><strong>QEWI:</strong> <span id="summaryQEWI">-</span></div>
                        <div><strong>Status:</strong> <span id="summaryStatus">-</span></div>
                    </div>
                </div>
                <button type="submit" class="btn btn-generate">Generate FISP Report (.docx)</button>
                <button type="button" class="btn btn-secondary">Save Draft</button>
            </form>
        </div>
    </div>
    <div id="successToast" class="success-toast"><span id="toastMessage">Success!</span></div>
    <script>
        // COMPLETE APPURTENANCE LIST FROM DOB
        const appurtenances = [
            {id:'fireEscapes', label:'Fire Escapes'},
            {id:'laddersRooftops', label:'Ladders to Rooftops'},
            {id:'parapetsCopings', label:'Parapets/Copings'},
            {id:'balconies', label:'Balconies'},
            {id:'balconyEnclosures', label:'Balcony Enclosures'},
            {id:'terraceEnclosures', label:'Terrace Enclosures'},
            {id:'railingsGuards', label:'Railings/Guards'},
            {id:'windowFrames', label:'Window Frames'},
            {id:'windowGuards', label:'Window Guards'},
            {id:'windowACs', label:'Window Air Conditioners'},
            {id:'exteriorFixtures', label:'Exterior Fixtures'},
            {id:'signs', label:'Signs'},
            {id:'billboards', label:'Billboards'},
            {id:'flagpoles', label:'Flagpoles'},
            {id:'antennas', label:'Antennas'},
            {id:'satelliteDishes', label:'Satellite Dishes'},
            {id:'cellTowers', label:'Cell Phone Towers'},
            {id:'flowerBoxes', label:'Flower Boxes'}
        ];

        // Build appurtenances UI
        const appContainer = document.getElementById('appurtenancesContainer');
        appurtenances.forEach(app => {
            appContainer.innerHTML += `
                <div class="appurtenance-item">
                    <div class="appurtenance-header">
                        <span class="appurtenance-label">${app.label}:</span>
                        <select class="appurtenance-select" onchange="handleAppChange('${app.id}',this.value,'${app.label}')">
                            <option value="">N/A</option>
                            <option value="Safe">Safe</option>
                            <option value="SWARMP">SWARMP</option>
                            <option value="Unsafe">Unsafe</option>
                        </select>
                    </div>
                    <div id="${app.id}-details" class="condition-details"></div>
                </div>`;
        });

        // Store photos per condition
        const conditionPhotos = {};

        function handleAppChange(id, status, label) {
            const details = document.getElementById(id+'-details');
            details.innerHTML = '';
            details.className = 'condition-details';
            if (!status) { 
                details.classList.remove('show'); 
                delete conditionPhotos[id];
                return; 
            }
            
            // Initialize photo storage for this condition
            if (!conditionPhotos[id]) conditionPhotos[id] = [];
            
            details.classList.add(status.toLowerCase(), 'show');
            
            let html = `<div class="condition-details-title">${label} - ${status}</div>
                <div class="form-grid">
                    <div class="form-group"><label>Condition Code</label><input type="text" name="${id}_code" placeholder="e.g., ${status === 'Safe' ? 'SAF' : status === 'SWARMP' ? 'SWR' : 'UNS'}-01"></div>
                    <div class="form-group"><label>Location</label><input type="text" name="${id}_location" placeholder="e.g., North Elevation, Floors 3-5, at parapet"></div>
                </div>
                <div class="form-group"><label>Description</label><textarea name="${id}_desc" rows="2" placeholder="${status === 'Safe' ? 'Example: Fire escape is securely anchored to the building facade. All platforms, railings, and ladder rungs are intact with no visible corrosion or structural defects. Paint coating is in good condition.' : status === 'SWARMP' ? 'Example: Mortar joints at parapet are deteriorated with loss of pointing material up to 1 inch deep. Isolated areas of brick face spalling observed. No loose or displaced units.' : 'Example: Loose terra cotta cornice unit observed at northwest corner. Unit is cracked and displaced approximately 2 inches from facade. Presents falling hazard to pedestrians below.'}"></textarea></div>`;
            
            if (status === 'SWARMP') {
                html += `
                    <div class="form-grid">
                        <div class="form-group"><label>Cause</label><input type="text" name="${id}_cause" placeholder="e.g., Water infiltration, freeze-thaw cycles, deferred maintenance, age"></div>
                        <div class="form-group"><label>Recommended Repair Date</label><input type="date" name="${id}_repairDate"></div>
                    </div>
                    <div class="form-group"><label>Repair Recommendation</label><textarea name="${id}_repair" rows="2" placeholder="Example: Repoint deteriorated mortar joints with Type N mortar to match existing. Remove and replace spalled brick units in kind. Apply waterproof coating to exposed surfaces. Estimated repair timeframe: within 5 years."></textarea></div>`;
            }
            
            if (status === 'Unsafe') {
                html += `
                    <div class="form-grid">
                        <div class="form-group"><label>Cause</label><input type="text" name="${id}_cause" placeholder="e.g., Failed anchorage, severe water damage, structural failure, impact damage"></div>
                        <div class="form-group"><label>FISP3 Filed Date</label><input type="date" name="${id}_fisp3"></div>
                    </div>
                    <div class="form-group"><label>Immediate Action Required</label><textarea name="${id}_action" rows="2" placeholder="Example: Immediately install sidewalk shed along north facade to protect pedestrians. Secure loose cornice unit with temporary bracing or netting. Remove loose/hazardous elements within 30 days."></textarea></div>
                    <div class="form-group"><label>Public Protection Measures</label><input type="text" name="${id}_protection" placeholder="e.g., Sidewalk shed installed 1/15/2026, Construction fence erected, Pedestrian barrier with warning signs"></div>`;
            }
            
            // Photo upload section - UP TO 10 PHOTOS
            html += `
                <div class="photo-upload-section">
                    <label>Condition Photos (up to 10)</label>
                    <input type="file" accept="image/*" multiple onchange="handleConditionPhotos(event, '${id}')" style="margin-bottom:10px">
                    <div class="photo-count" id="${id}-photo-count">0 of 10 photos</div>
                    <div class="photo-preview-grid" id="${id}-photos"></div>
                </div>`;
            
            details.innerHTML = html;
            showToast(label + ' set to ' + status);
        }

        function handleConditionPhotos(event, id) {
            const files = event.target.files;
            const grid = document.getElementById(id + '-photos');
            const countEl = document.getElementById(id + '-photo-count');
            
            if (!conditionPhotos[id]) conditionPhotos[id] = [];
            
            for (let file of files) {
                if (conditionPhotos[id].length >= 10) {
                    showToast('Maximum 10 photos per condition');
                    break;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    conditionPhotos[id].push(e.target.result);
                    
                    const div = document.createElement('div');
                    div.className = 'photo-preview';
                    const idx = conditionPhotos[id].length - 1;
                    div.innerHTML = `<img src="${e.target.result}"><button class="remove-btn" onclick="removeConditionPhoto('${id}', ${idx}, this)">X</button>`;
                    grid.appendChild(div);
                    
                    countEl.textContent = conditionPhotos[id].length + ' of 10 photos';
                };
                reader.readAsDataURL(file);
            }
        }

        function removeConditionPhoto(id, index, btn) {
            conditionPhotos[id].splice(index, 1);
            btn.parentElement.remove();
            document.getElementById(id + '-photo-count').textContent = conditionPhotos[id].length + ' of 10 photos';
            // Re-index remaining photos
            const grid = document.getElementById(id + '-photos');
            const btns = grid.querySelectorAll('.remove-btn');
            btns.forEach((b, i) => {
                b.setAttribute('onclick', `removeConditionPhoto('${id}', ${i}, this)`);
            });
        }

        function handleLogoUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = ev => {
                    document.getElementById('logoPreview').src = ev.target.result;
                    document.getElementById('logoPreviewContainer').style.display = 'block';
                    document.getElementById('logoZone').style.display = 'none';
                };
                reader.readAsDataURL(file);
                showToast('Logo uploaded!');
            }
        }

        function removeLogo() {
            document.getElementById('logoPreview').src = '';
            document.getElementById('logoPreviewContainer').style.display = 'none';
            document.getElementById('logoZone').style.display = 'block';
            document.getElementById('logoInput').value = '';
        }

        function handlePhotoUpload(e, type) {
            const grid = document.getElementById(type + 'PreviewGrid');
            for (let file of e.target.files) {
                const reader = new FileReader();
                reader.onload = ev => {
                    const div = document.createElement('div');
                    div.className = 'photo-preview';
                    div.innerHTML = '<img src="' + ev.target.result + '"><button class="remove-btn" onclick="this.parentElement.remove()">X</button>';
                    grid.appendChild(div);
                };
                reader.readAsDataURL(file);
            }
            showToast(e.target.files.length + ' photo(s) added!');
        }

        function selectFormat(format, el) {
            document.querySelectorAll('.format-option').forEach(o => o.classList.remove('selected'));
            el.classList.add('selected');
            document.getElementById('selectedFormat').value = format;
        }

        document.getElementById('fispForm').addEventListener('submit', function(e) {
            e.preventDefault();
            document.getElementById('summaryAddress').textContent = document.getElementById('address').value || '-';
            document.getElementById('summaryBorough').textContent = document.getElementById('borough').value || '-';
            document.getElementById('summaryQEWI').textContent = (document.getElementById('qewiFirstName').value + ' ' + document.getElementById('qewiLastName').value).trim() || '-';
            document.getElementById('summaryStatus').textContent = document.getElementById('buildingStatus').value || '-';
            showToast('Generating report...');
        });

        function showToast(msg) {
            const toast = document.getElementById('successToast');
            document.getElementById('toastMessage').textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
